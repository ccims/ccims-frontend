<!--Timeline of a given issue showing all its events-->

<!------ Include the above in your HEAD tag ---------->
<app-query-component errorMessage="Failed to load timeline items">
  <ng-template appQueryBody>
    <div class="container">
      <div class="page-header"></div>

      <ul class="timeline">
        <li
          *ngFor="let timelineItem of timelineItems"
          [ngSwitch]="timelineItem.type"
          class="timeline-inverted"
        >
          <!--Icons used in the timeline-->
          <div class="timeline-badge" *ngSwitchCase="'AddedToComponentEvent'">
            <mat-icon>add</mat-icon>
          </div>
          <div
            class="timeline-badge"
            *ngSwitchCase="'RemovedFromComponentEvent'"
          >
            <mat-icon>remove</mat-icon>
          </div>
          <div class="timeline-badge" *ngSwitchCase="'AddedToLocationEvent'">
            <mat-icon>add</mat-icon>
          </div>
          <div
            class="timeline-badge"
            *ngSwitchCase="'RemovedFromLocationEvent'"
          >
            <mat-icon>remove</mat-icon>
          </div>
          <div class="timeline-badge closed" *ngSwitchCase="'ClosedEvent'">
            <mat-icon>task_alt</mat-icon>
          </div>
          <div class="timeline-badge reopened" *ngSwitchCase="'ReopenedEvent'">
            <mat-icon>add_task</mat-icon>
          </div>
          <div class="timeline-badge" *ngSwitchCase="'AssignedEvent'">
            <mat-icon>person_add</mat-icon>
          </div>
          <div class="timeline-badge" *ngSwitchCase="'UnassignedEvent'">
            <mat-icon>person_remove</mat-icon>
          </div>
          <div class="timeline-badge" *ngSwitchCase="'CategoryChangedEvent'">
            <mat-icon>category</mat-icon>
          </div>
          <div class="timeline-badge" *ngSwitchCase="'DueDateChangedEvent'">
            <mat-icon>event</mat-icon>
          </div>
          <div
            class="timeline-badge"
            *ngSwitchCase="'EstimatedTimeChangedEvent'"
          >
            <mat-icon>date_range</mat-icon>
          </div>
          <div class="timeline-badge" *ngSwitchCase="'LabelledEvent'">
            <mat-icon>new_label</mat-icon>
          </div>
          <div class="timeline-badge" *ngSwitchCase="'UnlabelledEvent'">
            <mat-icon>label</mat-icon>
          </div>
          <div class="timeline-badge" *ngSwitchCase="'DeletedIssueComment'">
            <mat-icon>speaker_notes_off</mat-icon>
          </div>
          <div class="timeline-badge" *ngSwitchCase="'MarkedAsDuplicateEvent'">
            <mat-icon>plagiarism</mat-icon>
          </div>
          <div
            class="timeline-badge"
            *ngSwitchCase="'UnmarkedAsDuplicateEvent'"
          >
            <mat-icon>file_copy</mat-icon>
          </div>
          <div class="timeline-badge" *ngSwitchCase="'LinkEvent'">
            <mat-icon>add_link</mat-icon>
          </div>
          <div class="timeline-badge" *ngSwitchCase="'UnlinkEvent'">
            <mat-icon>link_off</mat-icon>
          </div>
          <div class="timeline-badge" *ngSwitchCase="'PinnedEvent'">
            <mat-icon>push_pin</mat-icon>
          </div>
          <div class="timeline-badge" *ngSwitchCase="'UnpinnedEvent'">
            <mat-icon>push_pin</mat-icon>
          </div>
          <div
            class="timeline-badge warning"
            *ngSwitchCase="'ReferencedByIssueEvent'"
          >
            <mat-icon>switch_access_shortcut_add</mat-icon>
          </div>
          <div
            class="timeline-badge warning"
            *ngSwitchCase="'ReferencedByOtherEvent'"
          >
            <mat-icon>switch_access_shortcut</mat-icon>
          </div>
          <div class="timeline-badge" *ngSwitchCase="'StartDateChangedEvent'">
            <mat-icon>event</mat-icon>
          </div>
          <div class="timeline-badge" *ngSwitchCase="'PriorityChangedEvent'">
            <mat-icon>reorder</mat-icon>
          </div>
          <div class="timeline-badge" *ngSwitchCase="'RenamedTitleEvent'">
            <mat-icon>drive_file_rename_outline</mat-icon>
          </div>
          <div class="timeline-badge warning" *ngSwitchCase="'WasLinkedEvent'">
            <mat-icon>add_link</mat-icon>
          </div>
          <div class="timeline-badge" *ngSwitchCase="'WasUnlinkedEvent'">
            <mat-icon>link_off</mat-icon>
          </div>
          <div class="timeline-badge" *ngSwitchCase="'AddedArtifactEvent'">
            <mat-icon>data_object</mat-icon>
          </div>
          <div class="timeline-badge" *ngSwitchCase="'RemovedArtifactEvent'">
            <mat-icon>data_object</mat-icon>
          </div>
          <div
            class="timeline-badge"
            *ngSwitchCase="'AddedNonFunctionalConstraintEvent'"
          >
            <mat-icon>border_style</mat-icon>
          </div>
          <div
            class="timeline-badge"
            *ngSwitchCase="'RemovedNonFunctionalConstraintEvent'"
          >
            <mat-icon>border_style </mat-icon>
          </div>

          <!--Timeline events-->

          <!--1. Event: issue comment is added-->
          <div class="commentContainer" *ngSwitchCase="'IssueComment'">
            <app-comment
              [commentId]="makeCommentId(timelineItem.item)"
              [issueId]="issueId"
              [isIssueBody]="false"
            ></app-comment>
          </div>

          <!--2. Event: issue is closed-->
          <div class="timeline-panel" *ngSwitchCase="'ClosedEvent'">
            <app-timeline-item [timelineItem]="timelineItem">
              <ng-template appSingleTimelineItem
                >Issue was closed by <a>{{ timelineItem.user }}</a></ng-template
              >
            </app-timeline-item>
          </div>

          <!--3. Event: issue is assigned-->
          <div class="timeline-panel" *ngSwitchCase="'AssignedEvent'">
            <app-timeline-item
              [timelineItem]="timelineItem"
              [showDeleted]="!timelineItem.item.assignee"
            >
              <ng-template appSingleTimelineItem>
                <span
                  *ngIf="selfAssigned(timelineItem.item); else notSelfAssigned"
                >
                  <a>{{ timelineItem.user }}</a> self-assigned this issue
                </span>
                <ng-template #notSelfAssigned>
                  <a>{{ timelineItem.user }}</a> assigned this issue to user
                  <a>{{ timelineItem.item.assignee.displayName }}</a>
                </ng-template>
              </ng-template>

              <ng-template appTimelineItemDeleted>
                <a>{{ timelineItem.user }}</a> assigned this issue to deleted
                user
              </ng-template>
            </app-timeline-item>
          </div>

          <!--4. Event: issue date is changed-->
          <div class="timeline-panel" *ngSwitchCase="'DueDateChangedEvent'">
            <app-timeline-item [timelineItem]="timelineItem">
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> changed due date from
                {{ timelineItem.item.oldDueDate }} to
                {{ timelineItem.item.newDueDate }}
              </ng-template>
            </app-timeline-item>
          </div>

          <!--5. Event: issue estimated time changed-->
          <div
            class="timeline-panel"
            *ngSwitchCase="'EstimatedTimeChangedEvent'"
          >
            <app-timeline-item [timelineItem]="timelineItem">
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> changed the estimated time from
                {{ timelineItem.item.oldEstimatedTime }} to
                {{ timelineItem.item.newEstimatedTime }}
              </ng-template>
            </app-timeline-item>
          </div>

          <!--6. Event: issue is labelled-->
          <div class="timeline-panel" *ngSwitchCase="'LabelledEvent'">
            <app-timeline-item [timelineItem]="timelineItem">
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> added label
                <span style="display: inline-block">
                  <app-issue-label
                    [label]="timelineItem.item.label"
                  ></app-issue-label>
                </span>
              </ng-template>

              <ng-template appCoalescedTimelineItems>
                <a>{{ timelineItem.user }}</a> added labels
                <span
                  style="display: inline-block"
                  *ngFor="let node of timelineItem.item"
                >
                  <app-issue-label [label]="node.label"></app-issue-label>
                </span>
              </ng-template>
            </app-timeline-item>
          </div>

          <!--7. Event: issue comment is deleted-->
          <div class="timeline-panel" *ngSwitchCase="'DeletedIssueComment'">
            <app-timeline-item [timelineItem]="timelineItem">
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.item.deletedBy?.displayName }}</a> deleted
                comment by <a>{{ timelineItem.user }}</a>
              </ng-template>
            </app-timeline-item>
          </div>

          <!--8. Event: issue is marked ad duplicate-->
          <div class="timeline-panel" *ngSwitchCase="'MarkedAsDuplicateEvent'">
            <app-timeline-item
              [timelineItem]="timelineItem"
              [showDeleted]="!timelineItem.item.originalIssue"
            >
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> marked this issue as duplicate of
                issue
                <app-issue-item
                  [issue]="timelineItem.item.originalIssue"
                  [interactive]="true"
                  [projectId]="projectID"
                >
                </app-issue-item>
              </ng-template>

              <ng-template appTimelineItemDeleted>
                <a>{{ timelineItem.user }}</a> marked this issue as duplicate of
                deleted issue
              </ng-template>
            </app-timeline-item>
          </div>

          <!--9. Event: issue is linked to another issue-->
          <div class="timeline-panel" *ngSwitchCase="'LinkEvent'">
            <app-timeline-item [timelineItem]="timelineItem">
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> linked this issue to issue
                <app-issue-item
                  [issue]="timelineItem.item.linkedIssue"
                  [interactive]="true"
                  [projectId]="projectID"
                >
                </app-issue-item>
              </ng-template>

              <ng-template appCoalescedTimelineItems>
                <a>{{ timelineItem.user }}</a> linked this issue to issues
                <ng-container *ngFor="let item of timelineItem.item">
                  <app-issue-item
                    [issue]="item.linkedIssue"
                    [interactive]="true"
                    [projectId]="projectID"
                  >
                  </app-issue-item>
                </ng-container>
              </ng-template>
            </app-timeline-item>
          </div>

          <!--10. Event: issue is pinnned on a (dleeted) component-->
          <div class="timeline-panel" *ngSwitchCase="'PinnedEvent'">
            <app-timeline-item
              [timelineItem]="timelineItem"
              [checkDeletedFn]="!timelineItem.item.component"
            >
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> pinned this issue on component
                <app-issue-location
                  [projectId]="projectID"
                  [location]="timelineItem.item.component"
                ></app-issue-location>
              </ng-template>

              <ng-template appTimelineItemDeleted>
                <a>{{ timelineItem.user }}</a> pinned this issue on deleted
                component
              </ng-template>
            </app-timeline-item>
          </div>

          <!--11. Event: issue is referenced by another (deleted) issue-->
          <div class="timeline-panel" *ngSwitchCase="'ReferencedByIssueEvent'">
            <app-timeline-item
              [timelineItem]="timelineItem"
              [checkDeletedFn]="!timelineItem.item.mentionedAt"
            >
              <ng-template appSingleTimelineItem>
                This issue was referenced by issue
                <app-issue-item
                  [issue]="timelineItem.item.mentionedAt"
                  [interactive]="true"
                  [projectId]="projectID"
                >
                </app-issue-item>
                in comment
                <a>{{ timelineItem.item.mentionedInComment?.id }}</a> by
                <a>{{ timelineItem.user }}</a>
              </ng-template>

              <ng-template appTimelineItemDeleted
                >This issue was referenced by a deleted issue</ng-template
              >
            </app-timeline-item>
          </div>

          <!--12. Event: issue's priority is changed-->
          <div class="timeline-panel" *ngSwitchCase="'PriorityChangedEvent'">
            <app-timeline-item [timelineItem]="timelineItem">
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> changed priority from
                {{ timelineItem.item.oldPriority }} to
                {{ timelineItem.item.newPriority }}
              </ng-template>
            </app-timeline-item>
          </div>

          <!--13. Event: issue is removed from a component / components-->
          <div
            class="timeline-panel"
            *ngSwitchCase="'RemovedFromComponentEvent'"
          >
            <app-timeline-item [timelineItem]="timelineItem">
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> removed this issue from component
                <app-issue-location
                  [projectId]="projectID"
                  [location]="timelineItem.item.removedComponent"
                >
                </app-issue-location>
              </ng-template>

              <ng-template appCoalescedTimelineItems>
                <a>{{ timelineItem.user }}</a> removed this issue from
                components
                <ng-container *ngFor="let item of timelineItem.item">
                  <app-issue-location
                    [projectId]="projectID"
                    [location]="item.removedComponent"
                  >
                  </app-issue-location>
                </ng-container>
              </ng-template>
            </app-timeline-item>
          </div>

          <!--14. Event: issue is referenced in a (deleted) component-->
          <div class="timeline-panel" *ngSwitchCase="'ReferencedByOtherEvent'">
            <app-timeline-item
              [timelineItem]="timelineItem"
              [showDeleted]="!timelineItem.item.component"
            >
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> referenced this issue in
                component
                <app-issue-location
                  [projectId]="projectID"
                  [location]="timelineItem.item.component"
                ></app-issue-location>
                with
                <a href="{{ timelineItem.item.sourceURL }}">{{
                  timelineItem.item.source
                }}</a>
              </ng-template>

              <ng-template appTimelineItemDeleted>
                <a>{{ timelineItem.user }}</a> referenced this issue in deleted
                component
              </ng-template>
            </app-timeline-item>
          </div>

          <!--15. Event: issue is removed from a location / locations-->
          <div
            class="timeline-panel"
            *ngSwitchCase="'RemovedFromLocationEvent'"
          >
            <app-timeline-item [timelineItem]="timelineItem">
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> removed this issue from location
                <app-issue-location
                  [projectId]="projectID"
                  [location]="timelineItem.item.removedLocation"
                >
                </app-issue-location>
              </ng-template>

              <ng-template appCoalescedTimelineItems>
                <a>{{ timelineItem.user }}</a> removed this issue from locations
                <ng-container *ngFor="let item of timelineItem.item">
                  <app-issue-location
                    [projectId]="projectID"
                    [location]="item.removedLocation"
                  >
                  </app-issue-location>
                </ng-container>
              </ng-template>
            </app-timeline-item>
          </div>

          <!--16. Event: issue is reopened-->
          <div class="timeline-panel" *ngSwitchCase="'ReopenedEvent'">
            <app-timeline-item [timelineItem]="timelineItem">
              <ng-template appSingleTimelineItem
                ><a>{{ timelineItem.user }}</a> reopened this issue</ng-template
              >
            </app-timeline-item>
          </div>

          <!--17. Event: issue's start date is changed-->
          <div class="timeline-panel" *ngSwitchCase="'StartDateChangedEvent'">
            <app-timeline-item [timelineItem]="timelineItem">
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> changed start date from
                {{ timelineItem.item.oldStartDate }} to
                {{ timelineItem.item.newStartDate }}
              </ng-template>
            </app-timeline-item>
          </div>

          <!--18. Event: issue's title is renamed-->
          <div class="timeline-panel" *ngSwitchCase="'RenamedTitleEvent'">
            <app-timeline-item [timelineItem]="timelineItem">
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> changed title of this issue from
                {{ timelineItem.item.oldTitle }} to
                {{ timelineItem.item.newTitle }}
              </ng-template>
            </app-timeline-item>
          </div>

          <!--19. Event: issue is unassigned-->
          <div class="timeline-panel" *ngSwitchCase="'UnassignedEvent'">
            <app-timeline-item
              [timelineItem]="timelineItem"
              [showDeleted]="!timelineItem.item.removedAssignee"
            >
              <ng-template appSingleTimelineItem>
                <span
                  *ngIf="selfAssigned(timelineItem.item); else notSelfAssigned"
                >
                  <a>{{ timelineItem.user }}</a> self-unassigned
                </span>
                <ng-template #notSelfAssigned>
                  <a>{{ timelineItem.user }}</a> unassigned
                  <a>{{ timelineItem.item.removedAssignee.displayName }}</a>
                </ng-template>
              </ng-template>

              <ng-template appTimelineItemDeleted>
                <a>{{ timelineItem.user }}</a> unassigned deleted User
              </ng-template>
            </app-timeline-item>
          </div>

          <!--20. Event: issue is unlabelled-->
          <div class="timeline-panel" *ngSwitchCase="'UnlabelledEvent'">
            <app-timeline-item [timelineItem]="timelineItem">
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> removed label
                <span style="display: inline-block">
                  <app-issue-label
                    [label]="timelineItem.item.removedLabel"
                  ></app-issue-label>
                </span>
              </ng-template>

              <ng-template appCoalescedTimelineItems>
                <a>{{ timelineItem.user }}</a> removed labels
                <span
                  style="display: inline-block"
                  *ngFor="let node of timelineItem.item"
                >
                  <app-issue-label
                    [label]="node.removedLabel"
                  ></app-issue-label>
                </span>
              </ng-template>
            </app-timeline-item>
          </div>

          <!--21. Event: issue was linked by another (deleted) issue-->
          <div class="timeline-panel" *ngSwitchCase="'WasLinkedEvent'">
            <app-timeline-item
              [timelineItem]="timelineItem"
              [showDeleted]="!timelineItem.item.linkedBy"
            >
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> linked issue
                <app-issue-item
                  [issue]="timelineItem.item.linkedBy"
                  [interactive]="true"
                  [projectId]="projectID"
                >
                </app-issue-item>
                to this issue
              </ng-template>

              <ng-template appTimelineItemDeleted>
                <a>{{ timelineItem.user }}</a> linked deleted issue to this
                issue
              </ng-template>
            </app-timeline-item>
          </div>

          <!--22. Event: issue is unmarked as a duplicate-->
          <div
            class="timeline-panel"
            *ngSwitchCase="'UnmarkedAsDuplicateEvent'"
          >
            <app-timeline-item [timelineItem]="timelineItem">
              <ng-template appSingleTimelineItem
                ><a>{{ timelineItem.user }}</a> unmarked this issue as
                duplicate</ng-template
              >
            </app-timeline-item>
          </div>

          <!--23. Event: issue is unlinked by another (deleted) issue-->
          <div class="timeline-panel" *ngSwitchCase="'WasUnlinkedEvent'">
            <app-timeline-item
              [timelineItem]="timelineItem"
              [showDeleted]="!timelineItem.item.unlinkedBy"
            >
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> unlinked this issue in issue
                <app-issue-item
                  [issue]="timelineItem.item.unlinkedBy"
                  [interactive]="true"
                  [projectId]="projectID"
                >
                </app-issue-item>
              </ng-template>

              <ng-template appTimelineItemDeleted>
                <a>{{ timelineItem.user }}</a> unlinked this issue in deleted
                issue
              </ng-template>
            </app-timeline-item>
          </div>

          <!--24. Event: issue is unpinned in a (deleted) component-->
          <div class="timeline-panel" *ngSwitchCase="'UnpinnedEvent'">
            <app-timeline-item
              [timelineItem]="timelineItem"
              [showDeleted]="!timelineItem.item.component"
            >
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> unpinned this issue in component
                <app-issue-location
                  [projectId]="projectID"
                  [location]="timelineItem.item.component"
                ></app-issue-location>
              </ng-template>

              <ng-template appTimelineItemDeleted>
                <a>{{ timelineItem.user }}</a> unpinned this issue in deleted
                component
              </ng-template>
            </app-timeline-item>
          </div>

          <!--25. Event: issue is unlinked to another issue / issues-->
          <div class="timeline-panel" *ngSwitchCase="'UnlinkEvent'">
            <app-timeline-item [timelineItem]="timelineItem">
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> removed link to issue
                <app-issue-item
                  [issue]="timelineItem.item.removedLinkedIssue"
                  [interactive]="true"
                  [projectId]="projectID"
                >
                </app-issue-item>
              </ng-template>

              <ng-template appCoalescedTimelineItems>
                <a>{{ timelineItem.user }}</a> removed links to issues
                <ng-container *ngFor="let item of timelineItem.item">
                  <app-issue-item
                    [issue]="item.removedLinkedIssue"
                    [interactive]="true"
                    [projectId]="projectID"
                  >
                  </app-issue-item>
                </ng-container>
              </ng-template>
            </app-timeline-item>
          </div>

          <!--26. Event: issue has (deleted) artifacts added-->
          <div class="timeline-panel" *ngSwitchCase="'AddedArtifactEvent'">
            <app-timeline-item
              [timelineItem]="timelineItem"
              [showDeleted]="!timelineItem.item.removedLinkedIssue"
            >
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> added artifact
                <a>{{ timelineItem.item.artifact.id }}</a>
              </ng-template>

              <ng-template appTimelineItemDeleted>
                <a>{{ timelineItem.user }}</a> added deleted artifact
              </ng-template>
            </app-timeline-item>
          </div>

          <!--27. Event: issue has (deleted) artifacts removed-->
          <div class="timeline-panel" *ngSwitchCase="'RemovedArtifactEvent'">
            <app-timeline-item
              [timelineItem]="timelineItem"
              [showDeleted]="!timelineItem.item.removedLinkedIssue"
            >
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> removed artifact
                <a>{{ timelineItem.item.removedArtifact.id }}</a>
              </ng-template>

              <ng-template appTimelineItemDeleted>
                <a>{{ timelineItem.user }}</a> removed deleted artifact
              </ng-template>
            </app-timeline-item>
          </div>

          <!--28. Event: issue has a (deleted) non functional constraint added-->
          <div
            class="timeline-panel"
            *ngSwitchCase="'AddedNonFunctionalConstraintEvent'"
          >
            <app-timeline-item
              [timelineItem]="timelineItem"
              [showDeleted]="!timelineItem.item.nonFunctionalConstraint"
            >
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> added non functional constraint
                <a>{{ timelineItem.item.nonFunctionalConstraint.id }}</a>
              </ng-template>
              <ng-template appTimelineItemDeleted>
                <a>{{ timelineItem.user }}</a> added deleted non functional
                constraint
              </ng-template>
            </app-timeline-item>
          </div>

          <!--29. Event: issue has a (deleted) non functional constraint removed-->
          <div
            class="timeline-panel"
            *ngSwitchCase="'RemovedNonFunctionalConstraintEvent'"
          >
            <app-timeline-item
              [timelineItem]="timelineItem"
              [showDeleted]="!timelineItem.item.removedNonFunctionalConstraint"
            >
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> removed non functional constraint
                <a>{{ timelineItem.item.removedNonFunctionalConstraint.id }}</a>
              </ng-template>

              <ng-template appTimelineItemDeleted>
                <a>{{ timelineItem.user }}</a> removed deleted non functional
                constraint
              </ng-template>
            </app-timeline-item>
          </div>

          <!--30. Event: issue is added to a component / components-->
          <div class="timeline-panel" *ngSwitchCase="'AddedToComponentEvent'">
            <app-timeline-item [timelineItem]="timelineItem">
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> added this issue to component
                <app-issue-location
                  [projectId]="projectID"
                  [location]="timelineItem.item.component"
                ></app-issue-location>
              </ng-template>

              <ng-template appCoalescedTimelineItems>
                <a>{{ timelineItem.user }}</a> added this issue to components
                <ng-container *ngFor="let item of timelineItem.item">
                  <app-issue-location
                    [projectId]="projectID"
                    [location]="item.component"
                  ></app-issue-location>
                </ng-container>
              </ng-template>
            </app-timeline-item>
          </div>

          <!--31. Event: issue's category is changed-->
          <div class="timeline-panel" *ngSwitchCase="'CategoryChangedEvent'">
            <app-timeline-item [timelineItem]="timelineItem">
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a>
                changed category from
                <app-issue-category
                  [category]="timelineItem.item.oldCategory"
                ></app-issue-category>
                &nbsp;to&nbsp;
                <app-issue-category
                  [category]="timelineItem.item.newCategory"
                ></app-issue-category>
              </ng-template>
            </app-timeline-item>
          </div>

          <!--32. Event: issue is added to a location / locations-->
          <div class="timeline-panel" *ngSwitchCase="'AddedToLocationEvent'">
            <app-timeline-item [timelineItem]="timelineItem">
              <ng-template appSingleTimelineItem>
                <a>{{ timelineItem.user }}</a> added this issue to location
                <app-issue-location
                  [projectId]="projectID"
                  [location]="timelineItem.item.location"
                ></app-issue-location>
              </ng-template>

              <ng-template appCoalescedTimelineItems>
                <a>{{ timelineItem.user }}</a> added this issue to locations
                <ng-container *ngFor="let item of timelineItem.item">
                  <app-issue-location
                    [projectId]="projectID"
                    [location]="item.location"
                  ></app-issue-location>
                </ng-container>
              </ng-template>
            </app-timeline-item>
          </div>
        </li>
      </ul>
    </div>
  </ng-template>
</app-query-component>
